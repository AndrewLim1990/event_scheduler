{% extends "base.html" %}

{% block title %}Event Details{% endblock %}

{% block content %}
<h2>{{ event.name }}</h2>
<h3>Event Invite URL:</h3>
{{ event_invite_url }}
<h3>Guest List</h3>
<ul>
    {% for user_event in user_events %}
    <li>
        {{ user_event.user }} ({{ user_event.state }})
        <!-- Enclose each input and button in a form element -->
        <form method="post">
            {% csrf_token %}
            <input type="hidden" name="remove_participant_id" value="{{ user_event.user.id }}">
            <button type="submit">Remove</button>
        </form>
    </li>
    {% empty %}
    <li>No Users Yet.</li>
    {% endfor %}
</ul>

<form method="post">
    {% csrf_token %}
    {% if is_participant %}
        <button type="submit" name="remove_self">Leave Event</button>
    {% else %}
        <button type="submit" name="add_self">Join Event</button>
    {% endif %}
</form>

{% if form %}
    <h3>Add Participant</h3>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit" name="add_participant">Add</button>
    </form>
{% endif %}
{% endblock %}
